# 实验6：基于Oracle的火车售票系统数据库设计

## 1. 概述

- 火车售票系统的作用是在线售出票务的Web应用系统。
- 该系统主要包括五个模块：用户模块，管理员模块，订单模块，车站信息模块，公告模块。
- 相应的对应了用户表，管理员表，订单表，车站信息表，公告表。
- 用户和管理员的权限不同，分为两类角色。

## 2. 数据库设计

#### 用户表

| 字段    | 类型        | 主键，外键 | 可以为空 | 默认值 | 约束 | 说明         |
| ------- | ----------- | ---------- | -------- | ------ | ---- | ------------ |
| u_Id    | number      | 主键       | 否       |        |      | 用户ID       |
| u_Name  | varchar(10) |            | 否       |        |      | 用户姓名     |
| u_Pwd   | varchar(10) |            | 否       |        |      | 用户密码     |
| u_Addr  | varchar(20) |            | 是       | 空     |      | 用户地址     |
| u_Phone | varchar(20) |            | 是       | 空     |      | 用户电话号码 |

#### 管理员表

| 字段   | 类型        | 主键，外键 | 可以为空 | 默认值 | 约束 | 说明       |
| ------ | ----------- | ---------- | -------- | ------ | ---- | ---------- |
| m_Id   | number      | 主键       | 否       |        |      | 管理员ID   |
| m_Name | varchar(10) |            | 否       |        |      | 管理员姓名 |
| m_Pwd  | varchar(10) |            | 否       |        |      | 管理员密码 |

#### 订单表

| 字段         | 类型        | 主键，外键 | 可以为空 | 默认值 | 约束 | 说明     |
| ------------ | ----------- | ---------- | -------- | ------ | ---- | -------- |
| o_Id         | number      | 主键       | 否       |        |      | 订单ID   |
| startTime    | Date        |            | 否       |        |      | 出发时间 |
| endTime      | Date        |            | 否       |        |      | 结束时间 |
| o_price      | varchar(10) |            | 否       |        |      | 订单价格 |
| startStation | varchar(10) |            | 否       |        |      | 始发站   |
| endStation   | varchar(10) |            | 否       |        |      | 终点站   |

#### 车站信息表

| 字段   | 类型        | 主键，外键 | 可以为空 | 默认值 | 约束 | 说明     |
| ------ | ----------- | ---------- | -------- | ------ | ---- | -------- |
| s_Id   | number      | 主键       | 否       |        |      | 车站ID   |
| s_Name | varchar(10) |            | 否       |        |      | 车站名字 |
| s_Addr | varchar(10) |            | 否       |        |      | 车站位置 |

#### 公告表

| 字段    | 类型        | 主键，外键 | 可以为空 | 默认值 | 约束 | 说明         |
| ------- | ----------- | ---------- | -------- | ------ | ---- | ------------ |
| a_Id    | number      | 主键       | 否       |        |      | 公告ID       |
| a_Title | varchar(10) |            | 否       |        |      | 公告标题     |
| a_Desc  | varchar(50) |            | 否       |        |      | 公告详情     |
| a_Time  | Date        |            | 否       |        |      | 公告发布时间 |
| a_Flag  | varchar(10) |            | 否       |        |      | 公告审核标识 |

## 3. 实验步骤

#### (1)创建角色管理员(lh_manager)，创建用户(lh_admin)并分配权限，将角色lh_manager分配给用户lh_admin。

![3.1.1](C:\Users\25827\Desktop\数据库图片\3.1.1.png)



####     创建角色用户(lh_users)，创建用户(lh_user)并分配权限，将角色lh_users分配给用户lh_user。

![3.1.2](test6图片\3.1.2.png)

#### (2)创建用户表

![3.2.1](test6图片\3.2.1.png)

####   创建管理员表

![3.2.2](test6图片\3.2.2.png)

####   创建订单表

![3.2.3](test6图片\3.2.3.png)

####   创建车站信息表

![3.2.4](test6图片\3.2.4.png)

####   创建公告表

![3.2.5](test6图片\3.2.5.png)



####   插入五万条数据

![3.2.6](test6图片\3.2.6.png)

![3.2.7](test6图片\3.2.7.png)

#### (3)在数据库中建立程序包lh_Package，其中有过程Get_Users

![3.3.1](test6图片\3.3.1.png)

####    创建程序包lh_Package的程序包体

![3.3.2](test6图片\3.3.2.png)

#### (4)设计备份方案

![3.4.1](test6图片\3.4.1.png)

